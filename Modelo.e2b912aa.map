{"version":3,"sources":["javascript/Modelo.js"],"names":["Modelo","persistencia","listaDeCursos","curso","ultimaPesquisa","_disciplinasObj","infoSelected","ultimoInfo","carregarCursoEvent","Agrade","Event","carregarListaDeCursosEvent","pesquisaProcessadaEvent","itemsModificadosEvent","cabecalhoModificadoEvent","prototype","carregarCurso","caminho","_this","id","notify","$","ajax","url","datatype","success","json","JSON","parse","prepararDadosDeCurso","carregar","forEach","disciplina","grep","disciplinas","e","feita","liberada","_deveLiberar","processarCabecalho","error","carregarListaDeCursos","x","nome","push","sort","a","b","toLowerCase","y","processarPesquisa","pesquisa","tokens","seletores","valores","propriedades","disciplinasObj","devePesquisar","taxonomias","grupos","trim","undefined","split","token","leitor","seletor","valor","length","i","taxonomia","splice","j","String","search","obj","chave","Array","listaDeConjuntosComCreditosNaoCalculados","totalDeDisciplinas","totalDeCreditos","totalDeDisciplinasFeitas","totalDeCreditosFeitos","conjuntos","conjunto","disciplinasFeitas","creditosFeitos","creditos","creditosPrecisamSerCalculados","console","log","salvarLocalmente","dicsciplinasFeitas","Math","min","desfazerTodos","libera","inArray","requisitos","interagirComDisciplina","disciplinasModificadas","_verificarDisciplinasComCreditosMinimos","interagirComInfo","desbloqueia","idRequisito","requisito","disci","minCreditos","modificadas","window"],"mappings":"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","file":"Modelo.e2b912aa.map","sourceRoot":"../src","sourcesContent":["(function ( ) {\n\n    // Protótipo para objeto do Modelo do programa\n    function Modelo ( persistencia ) {\n        this.listaDeCursos;\n        this.curso;\n        this.persistencia = persistencia;\n        this.ultimaPesquisa;\n        this._disciplinasObj;\n        this.infoSelected;\n        this.ultimoInfo;\n\n        this.carregarCursoEvent = new Agrade.Event(this);\n        this.carregarListaDeCursosEvent = new Agrade.Event(this);\n\n        this.pesquisaProcessadaEvent = new Agrade.Event( this );\n        this.itemsModificadosEvent = new Agrade.Event( this );\n\n        this.cabecalhoModificadoEvent = new Agrade.Event( this );\n    };\n\n    // Função que carrega arquivo json com informações do curso\n    Modelo.prototype.carregarCurso = function ( caminho ) {\n        var _this = this;\n\n        //Caso estejam mandando carregar o major já carregado, só retorne o major sem fazer outra requisição\n        if(this.curso && this.curso.id === caminho){\n            _this.carregarCursoEvent.notify( true, this.curso );\n        }else{\n            $.ajax({\n                    url:'./config/cursos/' + caminho + '.json',\n                    datatype: 'json'\n                })\n            .success(function ( json ) {\n                var curso = typeof json === 'string' ? JSON.parse(json) : json;\n\n                curso.id = caminho;\n                _this.prepararDadosDeCurso ( curso );\n\n                _this.curso = curso;\n\n                var carregar = _this.persistencia.carregar( caminho );\n                if( carregar ){\n                    carregar.forEach(function ( id ) {\n                        var disciplina = $.grep(_this.curso.disciplinas, function(e){ return e.id == id; })[0];\n\n                        if(typeof disciplina !== 'undefined')\n                            disciplina.feita = true;\n                    });\n                }\n\n\n                _this.curso.disciplinas.forEach(function( disciplina ) {\n                    disciplina.liberada = _this._deveLiberar( disciplina );\n                });\n                _this.processarCabecalho( false );\n                _this.curso.disciplinas.forEach(function( disciplina ) {\n                    disciplina.liberada = _this._deveLiberar( disciplina );\n                });\n\n                _this.carregarCursoEvent.notify( true, _this.curso );\n            })\n            .error(function ( ) {\n                _this.carregarCursoEvent.notify( false );\n            });\n        }\n    };\n\n    //Função que carrega lista de cursos do arquivo 'setup.json'\n    Modelo.prototype.carregarListaDeCursos = function ( ) {\n        var _this = this;\n\n        //Caso estejam mandando carregar a lista já carregada, só retorne a lista sem fazer outra requisição\n        if(this.listaDeCursos){\n            _this.carregarListaDeCursosEvent.notify( true, _this.listaDeCursos );\n        }else{\n            $.ajax({\n                    url:'./config/setup.json',\n                    datatype: 'json'\n                })\n            .success(function ( json ) {\n                var listaDeCursos = typeof json === 'string' ? JSON.parse(json) : json;\n\n                _this.listaDeCursos = [];\n                for(x in listaDeCursos){\n                    var curso = {\n                        nome : x,\n                        url : listaDeCursos[x]\n                    }\n\n                    _this.listaDeCursos.push(curso);\n                }\n                _this.listaDeCursos = _this.listaDeCursos.sort(function(a,b){\n                    var x = a.nome.toLowerCase(),\n                        y = b.nome.toLowerCase();\n\n                    if(x < y) return -1;\n                    if(x > y) return 1;\n\n                    return 0;\n                });\n\n                _this.carregarListaDeCursosEvent.notify( true, _this.listaDeCursos );\n            })\n            .error(function ( ) {\n                _this.carregarListaDeCursosEvent.notify( false );\n            });\n        }\n    }\n\n    //Função que processa as pesquisas da barra de pesquisa\n    Modelo.prototype.processarPesquisa = function ( pesquisa ) {\n\n        var tokens,\n            seletores,\n            valores,\n            propriedades,\n            disciplinas,\n            disciplinasObj,\n            devePesquisar,\n            taxonomias,\n            grupos;\n\n        pesquisa = pesquisa.trim();\n        pesquisa = pesquisa.toLowerCase();\n\n        devePesquisar = pesquisa != this.ultimaPesquisa\n\n        if(typeof this.infoSelected === 'undefined' && typeof this.ultimoInfo !== 'undefined'){\n            devePesquisar = true;\n        }\n        if( devePesquisar ){\n                this.ultimoInfo = undefined;\n\n                this.ultimaPesquisa = pesquisa;\n                tokens = pesquisa.split( ' ' );\n                seletores = [];\n                valores = [];\n\n                tokens.forEach( function ( token ) {\n                    var leitor,\n                        seletor,\n                        valor;\n\n                    leitor = token.split( '=' );\n\n                    seletor = leitor[0];\n\n                    if(leitor.length >= 2)\n                        valor = leitor[1];\n\n                    if(seletor !== 'taxonomia'){\n                        seletores.push( seletor );\n                        if(valor == '') valor = undefined;\n                        valores.push( valor );\n                    }\n                });\n\n                //Garanta que as disciplinas serão ordenadas ao menos alfabeticamente\n                seletores.push('nome');\n                valores.push(undefined);\n\n                //Garanta que não há dois seletores iguais\n                for( i = 0; i < seletores.length; i++ ){\n                    if(     typeof this.curso.disciplinas[0][seletores[i]] === 'undefined'\n                        &&  typeof this.curso.disciplinas[0].taxonomia[seletores[i]] === 'undefined' ){\n                        seletores.splice(i, 1);\n                        valores.splice(i, 1);\n                        i--;\n                        continue;\n                    }\n\n                    for( j = i+1; j < seletores.length -1; j++ ){\n                        if(seletores[i] === seletores[j]){\n                            seletores.splice(j, 1);\n                            valores.splice(j, 1);\n                            j--;\n                            continue;\n                        }\n                    }\n                }\n\n                taxonomias = [];\n\n                for( i = 0; i < seletores.length - 1; i++ ){\n                    var seletor = seletores[i];\n\n                    if( typeof this.curso.disciplinas[0].taxonomia[seletor] !== 'undefined' ){\n                        taxonomias.push( seletor );\n                    }\n                }\n\n                //Ordena as disciplinas pelos seletores que são propriedades dela. Ignora taxonomias\n                this.curso.disciplinas = this.curso.disciplinas.sort( function ( a, b ) {\n\n                    for(i=0; i<seletores.length;i++){\n                        var seletor = seletores[i];\n\n                        if(typeof a.taxonomia[seletor] !== 'undefined'){\n                            if(a.taxonomia[seletor] < b.taxonomia[seletor]) return -1;\n                            if(a.taxonomia[seletor] > b.taxonomia[seletor]) return 1;\n                        }\n\n                        if(typeof a[seletor] !== 'undefined' ){\n                            if(a[seletor] < b[seletor]) return -1;\n                            if(a[seletor] > b[seletor]) return 1;\n                        }\n\n                    }\n\n                    return 0;\n                });\n\n                disciplinas = [];\n\n                this.curso.disciplinas.forEach( function (disciplina) {\n                    disciplinas.push(disciplina);\n                });\n\n                //Remove da lista de disciplinas todas as discplinas que não correspondem aos valores dos seletores com '='\n                for( i = 0; i < valores.length; i++ ) {\n                    if( typeof valores[i] !== 'undefined' ){\n                        var seletor = seletores[i];\n                        for( j = 0; j < disciplinas.length; j++ ) {\n                            var disciplina = disciplinas[j];\n\n                            if(typeof disciplina[seletor] !== 'undefined'){\n                                if(String(disciplina[seletor]).toLowerCase().search(valores[i].toLowerCase()) === -1){\n                                    disciplinas.splice(j, 1);\n                                    j--;\n                                    continue;\n                                }\n                            }else if(typeof disciplina.taxonomia[seletor] !== 'undefined'){\n                                if(String(disciplina.taxonomia[seletor]).toLowerCase().search(valores[i].toLowerCase()) === -1){\n                                    disciplinas.splice(j, 1);\n                                    j--;\n                                    continue;\n                                }\n                            }\n                        }\n                    }\n                }\n\n                if(taxonomias.length > 0)\n                    disciplinasObj = { };\n                else\n                    disciplinasObj = [];\n\n\n\n                disciplinas.forEach( function ( disciplina ) {\n                    var obj = disciplinasObj;\n\n                    if(taxonomias.length > 0){\n                        for( i = 0; i < taxonomias.length; i++){\n                            var seletor = taxonomias[i];\n                            if(typeof disciplina.taxonomia[seletor] !== 'undefined' ){\n                                var chave = seletor + ' ' + disciplina.taxonomia[seletor];\n\n                                if(typeof obj[chave] === 'undefined' ){\n                                    if(i === taxonomias.length - 1){\n                                        obj[chave] = [ ];\n                                    } else {\n                                        obj[chave] = { };\n                                        obj = obj[chave];\n                                    }\n                                }else{\n                                    if(!(obj[chave] instanceof Array))\n                                        obj = obj[chave];\n                                }\n\n                                if(i === taxonomias.length - 1) {\n                                    obj[chave].push( disciplina );\n                                }\n                            }\n                        }\n                    }else{\n                        obj.push( disciplina )\n                    }\n                });\n\n                this._disciplinasObj = disciplinasObj;\n\n        }\n\n        this.pesquisaProcessadaEvent.notify( this._disciplinasObj );\n    }\n\n    //Função que adiciona varriáveis ao objeto curso\n    Modelo.prototype.prepararDadosDeCurso = function ( curso ) {\n        var listaDeConjuntosComCreditosNaoCalculados,\n            _this = this;\n\n        listaDeConjuntosComCreditosNaoCalculados = [];\n\n        //Número total de disciplinas\n        curso.totalDeDisciplinas = 0;\n        //Número total de créditos do curso\n        curso.totalDeCreditos = 0;\n        //Número total de disciplinas feitas\n        curso.totalDeDisciplinasFeitas = 0;\n        //Número total de créditos feitos do curso\n        curso.totalDeCreditosFeitos = 0;\n\n        curso.conjuntos.forEach( function ( conjunto ) {\n            conjunto.disciplinasFeitas = 0;\n            conjunto.creditosFeitos = 0;\n\n            curso.totalDeDisciplinas += conjunto.disciplinas;\n            curso.totalDeCreditos += conjunto.creditos;\n\n            if(conjunto.creditos === 0)\n                listaDeConjuntosComCreditosNaoCalculados.push( conjunto );\n        } );\n\n        curso.disciplinas.forEach(function( disciplina ) {\n            var creditosPrecisamSerCalculados;\n\n\n            creditosPrecisamSerCalculados = false;\n\n            disciplina.feita = false;\n            disciplina.liberada = false;\n\n            listaDeConjuntosComCreditosNaoCalculados.forEach( function ( conjunto ) {\n                if(conjunto.nome === disciplina.taxonomia.conjunto ){\n                console.log(conjunto.nome)\n                    creditosPrecisamSerCalculados = true;\n                    conjunto.creditos += disciplina.creditos;\n                }\n            } );\n\n            if(creditosPrecisamSerCalculados){\n                curso.totalDeCreditos += disciplina.creditos;\n            }\n        });\n    }\n\n    Modelo.prototype.salvarLocalmente = function ( ) {\n        var dicsciplinasFeitas = [];\n\n        this.curso.disciplinas.forEach(function( disciplina ) {\n\n            if(disciplina.feita){\n               dicsciplinasFeitas.push(disciplina.id);\n            }\n        });\n\n        this.persistencia.salvarLocalmente( dicsciplinasFeitas, this.curso.id );\n    };\n\n    Modelo.prototype.processarCabecalho = function ( notify ) {\n        var _this = this;\n        //Número total de disciplinas feitas\n        this.curso.totalDeDisciplinasFeitas = 0;\n        //Número total de créditos feitos do curso\n        this.curso.totalDeCreditosFeitos = 0;\n\n        this.curso.conjuntos.forEach( function ( conjunto ) {\n            conjunto.disciplinasFeitas = 0;\n            conjunto.creditosFeitos = 0;\n        } );\n\n        this.curso.disciplinas.forEach(function( disciplina ) {\n\n            if(disciplina.liberada && disciplina.feita){\n                var conjunto = $.grep(_this.curso.conjuntos, function(e){ return e.nome == disciplina.taxonomia.conjunto; })[0];\n\n                if(typeof conjunto !== 'undefined'){\n                    if(conjunto.disciplinas <= 0 || conjunto.disciplinasFeitas < conjunto.disciplinas){\n                        conjunto.disciplinasFeitas++;\n                        conjunto.creditosFeitos += disciplina.creditos;\n                    }\n                }\n            }\n        });\n\n        this.curso.conjuntos.forEach( function ( conjunto ) {\n            _this.curso.totalDeDisciplinasFeitas += conjunto.disciplinasFeitas;\n            _this.curso.totalDeCreditosFeitos += Math.min(conjunto.creditosFeitos, conjunto.creditos);\n        } );\n\n        if(typeof notify === 'undefined' || !notify)\n            this.cabecalhoModificadoEvent.notify( this.curso );\n    };\n\n    Modelo.prototype.desfazerTodos = function ( ) {\n        var _this = this;\n\n        this.curso.disciplinas.forEach( function ( disciplina ) {\n            disciplina.feita = false;\n\n            libera = $.grep(_this.curso.disciplinas, function(e){ return $.inArray(disciplina.id, e.requisitos) !== -1});\n            libera.forEach(function(disciplina){\n                disciplina.liberada = false;\n            });\n        });\n\n        this.salvarLocalmente();\n        this.processarCabecalho( );\n        this.pesquisaProcessadaEvent.notify( this._disciplinasObj );\n    };\n\n    Modelo.prototype.interagirComDisciplina = function ( id ) {\n        var disciplina,\n            disciplinasModificadas,\n            _this = this;\n\n        disciplina = $.grep(this.curso.disciplinas, function(e){ return e.id == id; })[0];\n\n        disciplinasModificadas = [];\n        if( typeof disciplina !== 'undefined' ){\n\n            if( disciplina.liberada ) {\n                disciplina.feita = !disciplina.feita;\n                disciplinasModificadas.push( disciplina );\n                if( disciplina.feita ) {\n                    libera = $.grep(this.curso.disciplinas, function(e){ return $.inArray(id, e.requisitos) !== -1});\n                    libera.forEach(function(disciplina){\n                        disciplinasModificadas.push( disciplina );\n                        disciplina.liberada = _this._deveLiberar( disciplina );\n                    });\n                }else{\n                    libera = $.grep(this.curso.disciplinas, function(e){ return $.inArray(id, e.requisitos) !== -1});\n                    libera.forEach(function(disciplina){\n                        disciplinasModificadas.push( disciplina );\n                        disciplina.liberada = false;\n                    });\n                }\n            }\n        }\n        if(disciplinasModificadas.length > 0)\n            this.processarCabecalho( );\n\n        _this._verificarDisciplinasComCreditosMinimos( disciplinasModificadas );\n\n        this.salvarLocalmente( );\n\n        this.itemsModificadosEvent.notify( disciplinasModificadas )\n    };\n\n    Modelo.prototype.interagirComInfo = function ( id ) {\n\n        this.ultimoInfo = this.infoSelected;\n        if(this.infoSelected == id){\n            this.infoSelected = undefined;\n        }else{\n            this.infoSelected = id;\n        }\n\n        if(typeof this.infoSelected !== 'undefined'){\n            var disciplina,\n                disciplinas;\n\n            disciplina = $.grep(this.curso.disciplinas, function(e){ return e.id == id; })[0];\n\n            disciplinas = {\n                requisitos: [],\n                disciplina: [disciplina],\n                desbloqueia: []\n            };\n\n            for(var i = 0; i < disciplina.requisitos.length; i++) {\n                var idRequisito = disciplina.requisitos[i];\n                var requisito = $.grep(this.curso.disciplinas, function(e){ return e.id == idRequisito; })[0];\n\n                if(typeof requisito !== 'undefined')\n                    disciplinas.requisitos.push(requisito);\n            }\n\n            disciplinas.desbloqueia = $.grep(this.curso.disciplinas, function(e){ return $.inArray(id, e.requisitos) !== -1});\n\n\n            this._disciplinasObj = disciplinas;\n\n            this.pesquisaProcessadaEvent.notify( this._disciplinasObj, id );\n        }else{\n            this.processarPesquisa( this.ultimaPesquisa );\n        }\n\n    };\n\n    Modelo.prototype._deveLiberar = function ( disciplina ) {\n        var requisitos = disciplina.requisitos,\n            _this = this;\n\n\n\n        for(var i = 0; i < requisitos.length; i++ ) {\n            var id = requisitos[i];\n            var disci = $.grep(_this.curso.disciplinas, function(e){ return e.id == id; })[0];\n\n            if( typeof disci !== 'undefined' ){\n                if( !disci.feita )\n                    return false;\n            }\n        }\n\n        if(typeof disciplina.minCreditos !== 'undefined')\n            if(this.curso.totalDeCreditosFeitos < disciplina.minCreditos)\n                return false;\n\n\n\n        return true;\n    };\n    Modelo.prototype._verificarDisciplinasComCreditosMinimos = function ( modificadas ) {\n        var libera = $.grep(this.curso.disciplinas, function(e){ return typeof e.minCreditos !== 'undefined' }),\n            _this = this;\n        libera.forEach(function(disciplina){\n            modificadas.push( disciplina );\n            disciplina.liberada = _this._deveLiberar( disciplina );\n        });\n    };\n\n    window.Agrade = window.Agrade || { };\n    window.Agrade.Modelo = Modelo\n})();\n"]}